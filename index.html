<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dood Stream</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  background:#0f0f0f;
  color:#fff;
  font-family:system-ui,sans-serif;
  margin:0;
}
.container {
  max-width:1000px;
  margin:auto;
  padding:16px;
}
.player iframe {
  width:100%;
  height:420px;
  border-radius:12px;
}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:14px;
}
.card {
  cursor:pointer;
}
.card img {
  width:100%;
  border-radius:10px;
}
.card p {
  font-size:14px;
  margin:6px 0 0;
}
</style>
</head>
<body>

<div class="container">

  <h2>ðŸŽ¬ Now Playing</h2>
  <div class="player">
    <iframe id="player" allowfullscreen></iframe>
  </div>

  <h3>ðŸ“º Video Lainnya</h3>
  <div id="videos" class="grid"></div>

</div>

<script>
const API = "https://snowy-fog-a471.ap5089393.workers.dev/videos";
const player = document.getElementById("player");
const list = document.getElementById("videos");

fetch(API)
.then(res => res.json())
.then(data => {
  const files = data.result.files;
  if (!files.length) return;

  // autoplay video pertama
  player.src = files[0].download_url.replace('/d/','/e/');

  files.forEach(v => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${v.single_img}">
      <p>${v.title}</p>
    `;
    card.onclick = () => {
      player.src = v.download_url.replace('/d/','/e/');
      window.scrollTo({ top: 0, behavior: "smooth" });
    };
    list.appendChild(card);
  });
});
</script>

</body>
</html>
